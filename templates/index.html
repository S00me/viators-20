<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viators - High Altitude Community</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS (via CDN for simplicity in this environment) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Space Grotesk', 'sans-serif'],
                    },
                    colors: {
                        viator: {
                            purple: '#8B5CF6',
                            dark: '#0A0A0A',
                            light: '#F5F5F5',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                        'slide-up': 'slideUp 0.5s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="bg-black text-white font-sans selection:bg-purple-500 selection:text-white overflow-x-hidden">

    <!-- Header -->
    <header id="main-header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 px-6 py-4 flex justify-between items-center bg-transparent">
        <div class="flex items-center gap-2 cursor-pointer" onclick="scrollToSection('hero')">
            <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center">
                <span class="text-black font-bold text-xs">V</span>
            </div>
            <span class="text-white font-display font-bold tracking-wider text-lg">VIATORS</span>
        </div>

        <nav class="hidden md:flex gap-8">
            <button onclick="scrollToSection('expedition')" class="text-white/70 hover:text-white text-sm font-medium tracking-wide transition-colors uppercase">Expedition</button>
            <button onclick="scrollToSection('trips')" class="text-white/70 hover:text-white text-sm font-medium tracking-wide transition-colors uppercase">Trips</button>
            <button onclick="scrollToSection('community')" class="text-white/70 hover:text-white text-sm font-medium tracking-wide transition-colors uppercase">Community</button>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="hero" class="relative h-screen w-full flex flex-col items-center justify-center overflow-hidden bg-black text-white">
        <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-zinc-800 via-black to-black opacity-80"></div>
        <div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] mix-blend-overlay"></div>

        <div class="relative z-10 text-center px-4 max-w-4xl mx-auto flex flex-col items-center gap-8 animate-slide-up">
            <h1 class="font-display font-bold text-6xl md:text-8xl tracking-tighter text-white mb-2">VIATORS</h1>
            
            <div class="flex flex-col gap-2 items-center opacity-0 animate-fade-in" style="animation-delay: 0.4s; animation-fill-mode: forwards;">
                <p class="text-xl md:text-2xl text-zinc-400 font-light tracking-wide max-w-2xl leading-relaxed">Discover hidden natural beauty.</p>
                <p class="text-xl md:text-2xl text-zinc-400 font-light tracking-wide max-w-2xl leading-relaxed">Collect real shared experiences.</p>
                <p class="text-xl md:text-2xl text-zinc-400 font-light tracking-wide max-w-2xl leading-relaxed">Explore challenging heights together.</p>
            </div>

            <button onclick="scrollToSection('expedition')" class="mt-12 group flex flex-col items-center gap-2 text-white/50 hover:text-white transition-colors duration-300 opacity-0 animate-fade-in" style="animation-delay: 1s; animation-fill-mode: forwards;">
                <span class="text-xs uppercase tracking-[0.2em]">Begin Journey</span>
                <div class="p-3 rounded-full border border-white/10 group-hover:border-white/30 transition-all duration-300 group-hover:bg-white/5">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="animate-bounce"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
                </div>
            </button>
        </div>
    </section>

    <!-- Upcoming Expedition Section -->
    <section id="expedition" class="py-24 bg-black text-white px-4 md:px-8">
        <div class="max-w-7xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-12 gap-6">
                <div>
                    <span class="text-viator-purple font-mono text-sm tracking-widest uppercase mb-2 block">Next Objective</span>
                    <h2 class="font-display text-4xl md:text-6xl font-bold tracking-tight">MATTERHORN ASCENT</h2>
                    <p class="text-zinc-400 mt-4 max-w-xl text-lg font-light">A technical climb via the Hörnli Ridge. High altitude exposure and mixed terrain.</p>
                </div>
                
                <div class="flex gap-4">
                    <div class="bg-zinc-900/50 backdrop-blur-sm border border-white/10 p-4 rounded-xl min-w-[120px]">
                        <span class="text-zinc-500 text-xs uppercase tracking-wider block mb-1">Elevation</span>
                        <span class="text-2xl font-mono font-bold text-white">4,478m</span>
                    </div>
                    <div class="bg-zinc-900/50 backdrop-blur-sm border border-white/10 p-4 rounded-xl min-w-[120px]">
                        <span class="text-zinc-500 text-xs uppercase tracking-wider block mb-1">Distance</span>
                        <span class="text-2xl font-mono font-bold text-white">18km</span>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 h-[600px]">
                <!-- Map Container -->
                <div class="lg:col-span-2 bg-zinc-900 rounded-2xl overflow-hidden relative border border-white/10 shadow-2xl group">
                    <div class="absolute top-4 right-4 z-[400] flex gap-2">
                        <div class="bg-black/80 backdrop-blur-md px-3 py-1 rounded-full border border-white/10">
                            <span class="text-xs font-mono text-purple-400 flex items-center gap-2">
                                <div class="w-2 h-2 bg-purple-500 rounded-full animate-pulse"></div>
                                LIVE TRACKING READY
                            </span>
                        </div>
                        <label class="bg-black/80 backdrop-blur-md px-3 py-1 rounded-full border border-white/10 hover:bg-white/10 transition-colors cursor-pointer" title="Upload GPX">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-400"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                            <input type="file" id="gpx-upload" accept=".gpx" class="hidden" onchange="handleFileUpload(this)">
                        </label>
                    </div>
                    <div id="map" class="w-full h-full grayscale-[0.5] group-hover:grayscale-0 transition-all duration-700 z-0"></div>
                </div>

                <!-- Details Panel -->
                <div class="bg-zinc-900/30 backdrop-blur-md border border-white/10 rounded-2xl p-8 flex flex-col justify-between">
                    <div class="space-y-8">
                        <div>
                            <h3 class="font-display text-xl font-bold mb-6 flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-viator-purple"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/><line x1="4" y1="22" x2="4" y2="15"/></svg>
                                Expedition Details
                            </h3>
                            
                            <div class="space-y-4">
                                <div class="flex items-center justify-between border-b border-white/5 pb-3">
                                    <div class="flex items-center gap-3 text-zinc-400">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                                        <span>Duration</span>
                                    </div>
                                    <span class="font-mono text-white">2 Days</span>
                                </div>
                                
                                <div class="flex items-center justify-between border-b border-white/5 pb-3">
                                    <div class="flex items-center gap-3 text-zinc-400">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                                        <span>Shelter</span>
                                    </div>
                                    <span class="font-mono text-white">Hörnlihütte</span>
                                </div>
                                
                                <div class="flex items-center justify-between border-b border-white/5 pb-3">
                                    <div class="flex items-center gap-3 text-zinc-400">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                                        <span>Region</span>
                                    </div>
                                    <span class="font-mono text-white">Valais, CH</span>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h4 class="text-sm font-bold text-zinc-500 uppercase tracking-wider mb-4">Highlights</h4>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-3 py-1 bg-white/5 border border-white/10 rounded-full text-xs text-zinc-300">Glacier Crossing</span>
                                <span class="px-3 py-1 bg-white/5 border border-white/10 rounded-full text-xs text-zinc-300">Ridge Scramble</span>
                                <span class="px-3 py-1 bg-white/5 border border-white/10 rounded-full text-xs text-zinc-300">Technical Rock</span>
                                <span class="px-3 py-1 bg-white/5 border border-white/10 rounded-full text-xs text-zinc-300">Exposed</span>
                            </div>
                        </div>
                    </div>

                    <button class="w-full mt-8 py-4 bg-white text-black font-bold rounded-xl hover:bg-zinc-200 transition-colors flex items-center justify-center gap-2 group">
                        View Full Itinerary
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="group-hover:translate-x-1 transition-transform"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Past Trips Section -->
    <section id="trips" class="py-24 bg-zinc-950 text-white px-4 md:px-8 relative overflow-hidden min-h-screen">
        <div class="absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"></div>
        
        <div class="max-w-7xl mx-auto">
            <div class="flex justify-between items-end mb-12">
                <div>
                    <span class="text-viator-purple font-mono text-sm tracking-widest uppercase mb-2 block">Archive</span>
                    <h2 class="font-display text-4xl md:text-5xl font-bold tracking-tight">PAST EXPEDITIONS</h2>
                </div>
                <div class="hidden md:block text-right">
                    <p class="text-zinc-500 text-sm font-mono">{{ trips|length }} TOTAL SUMMITS</p>
                </div>
            </div>

            <div id="trips-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 transition-all duration-500">
                {% for trip in trips[:3] %}
                <div class="trip-card group relative aspect-[4/5] rounded-2xl overflow-hidden cursor-pointer bg-zinc-900 border border-white/5 hover:border-white/20 transition-colors" onclick="openTripDetail('{{ trip.id }}')">
                    <img src="{{ trip.image }}" alt="{{ trip.name }}" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 opacity-60 group-hover:opacity-80" referrerpolicy="no-referrer">
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent opacity-80"></div>
                    
                    <div class="absolute bottom-0 left-0 right-0 p-6 transform translate-y-2 group-hover:translate-y-0 transition-transform duration-300">
                        <span class="text-purple-400 text-xs font-mono mb-2 block">{{ trip.date }}</span>
                        <h3 class="font-display text-2xl font-bold text-white mb-1">{{ trip.name }}</h3>
                        <div class="flex items-center gap-4 text-zinc-400 text-sm mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 delay-100">
                            <span class="flex items-center gap-1">
                                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg> {{ trip.location }}
                            </span>
                            <span class="flex items-center gap-1">
                                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"/></svg> {{ trip.elevation }}
                            </span>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <div id="expand-btn-container" class="mt-12 flex justify-center">
                <button onclick="expandTrips()" class="group flex flex-col items-center gap-2 text-zinc-500 hover:text-white transition-colors">
                    <span class="text-xs uppercase tracking-widest">Show All Archive</span>
                    <div class="p-3 rounded-full border border-white/10 group-hover:border-white/30 transition-all group-hover:bg-white/5">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><polyline points="19 12 12 19 5 12"/></svg>
                    </div>
                </button>
            </div>
        </div>
    </section>

    <!-- Trip Detail Modal (Hidden by default) -->
    <div id="trip-modal" class="fixed inset-0 z-[100] bg-black/90 backdrop-blur-xl hidden opacity-0 transition-opacity duration-300 overflow-y-auto">
        <div class="min-h-screen px-4 py-12 flex items-center justify-center">
            <div class="bg-zinc-900 w-full max-w-6xl rounded-3xl overflow-hidden border border-white/10 relative transform scale-95 transition-transform duration-300" id="modal-content">
                <button onclick="closeTripDetail()" class="absolute top-6 right-6 p-2 bg-black/50 backdrop-blur-md rounded-full border border-white/10 hover:bg-white hover:text-black transition-colors z-10">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </button>

                <div class="relative h-[40vh] md:h-[50vh]">
                    <img id="modal-image" src="" alt="" class="absolute inset-0 w-full h-full object-cover opacity-60" referrerpolicy="no-referrer">
                    <div class="absolute inset-0 bg-gradient-to-t from-zinc-900 via-transparent to-transparent"></div>
                    
                    <div class="absolute bottom-0 left-0 p-8 md:p-12">
                        <span id="modal-date" class="text-purple-400 font-mono text-sm tracking-widest uppercase mb-2 block"></span>
                        <h2 id="modal-title" class="font-display text-4xl md:text-6xl font-bold tracking-tight text-white"></h2>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 p-8 md:p-12">
                    <div class="lg:col-span-2 space-y-8">
                        <div class="prose prose-invert max-w-none">
                            <p id="modal-description" class="text-xl text-zinc-300 font-light leading-relaxed"></p>
                        </div>
                    </div>

                    <div class="space-y-6">
                        <div class="bg-black/50 p-6 rounded-2xl border border-white/5">
                            <h3 class="text-sm font-mono text-zinc-500 uppercase tracking-widest mb-4">Trip Stats</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center border-b border-white/5 pb-2">
                                    <span class="text-zinc-400 flex items-center gap-2">Elevation</span>
                                    <span id="modal-elevation" class="font-mono"></span>
                                </div>
                                <div class="flex justify-between items-center border-b border-white/5 pb-2">
                                    <span class="text-zinc-400 flex items-center gap-2">Location</span>
                                    <span id="modal-location" class="font-mono text-right"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer id="community" class="bg-black text-white py-24 border-t border-white/10 relative">
        <div class="max-w-7xl mx-auto px-6 md:px-12 flex flex-col md:flex-row justify-between items-start gap-12">
            <div class="space-y-6">
                <div class="flex items-center gap-2">
                    <div class="w-6 h-6 bg-white rounded-full flex items-center justify-center">
                        <span class="text-black font-bold text-[10px]">V</span>
                    </div>
                    <span class="font-display font-bold tracking-wider text-lg">VIATORS</span>
                </div>
                <p class="text-zinc-500 max-w-xs text-sm leading-relaxed">
                    A community dedicated to high-altitude exploration and the shared experience of the mountains.
                </p>
            </div>

            <div class="flex flex-col md:items-end gap-8">
                <blockquote class="text-xl md:text-2xl font-display font-light text-zinc-300 max-w-md text-left md:text-right leading-tight">
                    "It is not the mountain we conquer, but ourselves."
                </blockquote>
                <cite class="text-zinc-500 text-sm not-italic">— Edmund Hillary</cite>
                
                <button onclick="window.scrollTo({ top: 0, behavior: 'smooth' })" class="mt-8 flex items-center gap-2 text-xs uppercase tracking-widest text-zinc-500 hover:text-white transition-colors group">
                    Back to Summit
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="group-hover:-translate-y-1 transition-transform"><line x1="12" y1="19" x2="12" y2="5"/><polyline points="5 12 12 5 19 12"/></svg>
                </button>
            </div>
        </div>
        
        <div class="mt-24 text-center text-zinc-800 text-[10px] uppercase tracking-widest">
            © 2026 Viators Community. All Rights Reserved.
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script>
        // Pass Jinja2 data to JS
        const ALL_TRIPS = {{ trips|tojson }};
    </script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
